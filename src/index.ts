/**
 * @file index.ts
 * @brief –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
 *
 * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Dependency Injection –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
 *
 * @remarks
 * –≠—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–≤—ã–º, —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
 * –û–Ω –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏.
 */

import 'reflect-metadata';
import { setupContainer, getService } from './infrastructure/di';
import { UserService } from './domain/services/UserService/user.service';
import { TicketService } from './domain/services/TicketService/ticket.service';

/**
 * –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
 */
async function main(): Promise<void> {
  console.log('üöÄ Initializing Bandboats Support Bot...');

  // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
  setupContainer();
  console.log('‚úÖ Dependency Injection container configured');

  // –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ DI
  const userService = getService<UserService>('UserService');
  const ticketService = getService<TicketService>('TicketService');

  console.log('‚úÖ Services resolved from DI container');
  console.log('üì¶ UserService:', userService.constructor.name);
  console.log('üì¶ TicketService:', ticketService.constructor.name);

  // TODO: –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –±–æ—Ç–∞
  console.log('‚è≥ Telegram Bot initialization pending...');

  console.log('‚úÖ Application ready!');
}

// –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
main().catch((error) => {
  console.error('‚ùå Application failed to start:', error);
  process.exit(1);
});
